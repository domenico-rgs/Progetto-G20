<!DOCTYPE HTML>
@args {
ArrayList<server.domain.cinema.Movie> movieList
}

<html>

  <head>
    <link rel="icon" href="../statics/images/favicon.png" type="image/png" />
    <title>Cinema G20 - Movie Catalog</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="../statics/css/main.css" />
    <link rel="stylesheet" href="../statics/css/index.css">
    <link rel="stylesheet" href="../statics/css/catalog.css">
  </head>

  <body>

    <!-- Header with navbar-->
    <header id="header">
      <div class="inner">
        <nav id="nav">
          <a href="/">Home</a>
          <a href="/catalog">Movie Catalog</a>
		  <a href="/delete">Delete Reservation</a>
          <a href="/faq">FAQ</a>
          <a href="#footer">Contact us</a>
        </nav>
        <a href="#navPanel" class="navPanelToggle"><span class="fa fa-bars"></span></a>
      </div>
    </header>
	
	<!-- Banner con immagine di sfondo -->
			<section id="banner">
				<div class="inner">
					<header>
						<h1>Movie Catalog</h1>
						<h2>Choose the movie you'd like to watch</h2>
					</header>
				</div>
			</section>


    <!-- Three -->
    <section id="three" class="wrapper align-center">
      <div id="innerCatalog" class="inner">

        <!-- search bar -->
		<form method="post" action="/catalog">
        <div id="searchBar" class="searchBar">
          <input id="search" placeholder="Search" />
          <button type="submit"><img class="searchImg" src="../statics/images/icon/search.png" alt="" /></button>
        </div>
		</form>

        <!-- Movie catalog -->
        <div class="filmMenu">
        </div>

      </div>

      </div>
    </section>




    <!-- Footer -->
    <footer id="footer">
      @imported.footer()
    </footer>

    <!-- Scripts -->
    <script src="../statics/js/jquery.min.js"></script>
    <script src="../statics/js/skel.min.js"></script>
    <script src="../statics/js/util.js"></script>
    <script src="../statics/js/main.js"></script>

    <!-- nostri script -->
    <script src="../statics/js/search.js"></script>
	<script src="../statics/js/navbar.js"></script>
	<script src="../statics/js/GET.js"></script>

    <script>async function addMovieToDOM(title, image) {
 const itemDiv = document.createElement('div');
  itemDiv.className = 'item';
  const imageDiv = document.createElement('div');
  imageDiv.className = 'img';
  const nameDiv = document.createElement('div');
  nameDiv.className = 'name';
   const titleParag = document.createElement('p');


  const imgElement = document.createElement('img');
  imgElement.src = image;
  const titleElement = document.createTextNode(title);


itemDiv.appendChild(imageDiv).appendChild(imgElement);
itemDiv.appendChild(nameDiv).appendChild(titleParag).appendChild(titleElement);

  document.querySelector('.filmMenu').append(itemDiv);
}


function fetchRandomImages() {
  @for(int i = 0; i < movieList.size(); i++) {
	var title = '@movieList.get(i).getTitle()';
	var image = '@movieList.get(i).getPathCover()';
    addMovieToDOM(title, image);
  }
}

fetchRandomImages();
window.addEventListener('scroll', function() {
  if(window.scrollY + window.innerHeight + 100 >= document.documentElement.scrollHeight) {
    fetchRandomImages();
  }
})
</script>

  </body>

</html>